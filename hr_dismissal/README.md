# HR-аналитика: предсказание уровня удовлетворенности сотрудников и их увольнения по собственному желанию
## Описание проекта

Проект выполняется для компании, желающей оптимизировать управление персоналом. Руководство ожидает получить рекомендации, как избежать финансовых потерь из-за оттока сотрудников. 

Компания предоставила данные с характеристиками сотрудников, в том числе с уровнем удовлетворенности сотрудника работой в компании. Эту информацию получили из форм обратной связи: сотрудники заполняют тест-опросник, и по его результатам рассчитывается доля их удовлетворенности от 0 до 1, где 0 — совершенно неудовлетворен, 1 — полностью удовлетворен. 

Нужно построить две модели:
1. Для предсказания уровня удовлетворенности сотрудника; 
2. Для предсказания увольнения сотрудника по собственному желанию.

## Описание данных

Данные изначально разделены на тренировочную и тестовую выборки, в тестовой входные признаки отделены от целевых.
Файлы с данными:
* `train_job_satisfaction_rate.csv` (тренировочная выборка для первой модели);
* `test_features.csv` (входные признаки тестовой выборки);
* `test_target_job_satisfaction_rate.csv` (целевой признак тестовой выборки для первой модели);
* `train_quit.csv` (тренировочная выборка для второй модели);
* `test_target_quit.csv` (целевой признак тестовой выборки для второй модели).

Признаки, встречающиеся в предоставленных данных

|название столбца|содержащиеся данные|
|:-|:-|
|`id`|уникальный идентификатор сотрудника|
|`dept`|отдел, в котором работает сотрудник|
|`level`|уровень занимаемой должности|
|`workload`|уровень загруженности сотрудника|
|`employment_years`|длительность работы в компании (в годах)|
|`last_year_promo`|было ли повышение за последний год|
|`last_year_violations`|нарушал ли сотрудник трудовой договор за последний год|
|`supervisor_evaluation`|оценка качества работы сотрудника, которую дал руководитель|
|`salary`|ежемесячная зарплата сотрудника|
|`job_satisfaction_rate`|уровень удовлетворенности сотрудника работой в компании|
|`quit`|увольнение сотрудника из компании|

## Ход работы и выводы по проекту
### Задача 1. Предсказание уровня удовлетворенности сотрудника
1. В данных есть очень маленькое количество случайных пропусков в столбцах `dept` и `level`. Заполнили их в пайплайне самыми частыми значениями. 
2. Все типы данных соответствуют ожиданиям. Проверили наличие явных и скрытых дубликатов. Не обнаружили.
3. Исследовательский анализ показал, что: 
* в данных нет аномалий, крайне мало выбросов;

* тренировочная и тестовая выборки не имеют значительных отличий;

* большинство сотрудников:
    * работает меньше 5 лет;
    * зарабатывает от 22 800 до 43 200;
    * не очень удовлетворено своей работой;
    * оценивается начальниками на 4 или 3 из 5;
    * работает в отделе продаж; 
    * загружено средне;
    * не получило повышение в прошлом году;
    * не нарушало трудовой договор в прошлом году.

4. Корреляционный анализ (использовали коэффициент Фи) выявил:
* отсутствие очень сильных взаимосвязей;
* сильные связи между:
    * `job_satisfaction_rate` и `supervisor_evaluation`; 
    * `salary` и `level`;
    * `salary` и `workload`;
    * `employment_years` и `level`;

* средние связи между:
    * `job_satisfaction_rate` и `last_year_violations`;

* слабые связи между:
    * `job_satisfaction_rate` и `employment_years`;
    * `employment_years` и `salary`;
    * `workload` и `level`.
5. Проверка на мультиколлинеарность показала отсутствие сильных линейных взаимосвязей между признаками.
6. Построили пайплайн для подготовки данных и обучения моделей. Выбрали лучшую модель методом `RandomSearchCV`. Для этого создали функцию, возвращающую SMAPE. 
7. Линейная регрессия, как и ожидалось, показала худшие результаты, потому что взаимосвязи входных признаков и целевого далеки от линейных. Лучше всего справилась модель дерева решений с максимальной глубиной 10 и минимальным количеством образцов в листе 3. Ее SMAPE на тестовой выборке 14.93.
8. Такие гиперпараметры указывают на высокую сложность получившегося дерева решений. Многие входные признаки оказывают на целевой признак небольшое влияние, и модели приходится учитывать их все для более точного прогноза.

### Задача 2. Предсказание увольнения сотрудника
1. В данных нет пропусков и дубликатов.
2. Все типы соответствуют ожиданиям. Тренировочные выборки в двух задачах не совпадают. 
3. Исследовательский анализ показал, что:
* в данных нет аномалий, крайне мало выбросов;
* тренировочная и тестовая выборки не имеют значительных отличий;
* верны заключения исследовательского анализа из задачи 1, количество уволившихся гораздо меньше количества оставшихся.
4. Корреляционный анализ (использовали коэффициент Фи) выявил:
* картина взаимосвязей входных признаков между собой та же, мультиколлинеарность так же отсутствует;
* взаимосвязи `quit` с другими признаками:
    * сильных и очень сильных связей  нет;
    * средние связи с:
        * `salary`;
        * `employment_years`;
    * слабая связь с `level`.

5. Портрет типичного уволившиегося сотрудника:
* мог быть из любого отдела;
* проработал до 3 лет включительно:
* зарабатывал меньше 50 тысяч;
* имел уровень `junior`;
* был слабо или средне загружен;
* не продвигался по карьерной лестнице за последний год;
* чаще среднего нарушел трудовой договор;
* невысоко оценивался руководителем.
6. Проверили утверждение аналитиков о том, что уровень удовлетворенности работой в компании влияет на то, уволится ли сотрудник. Заключили, что аналитики правы.
7. При помощи модели из задачи 1 ввели новый входной признак - удовлетворенность работой.
8. Построили пайплайн для подготовки данных и обучения моделей. Выбрали лучшую модель методом `RandomSearchCV`, основываясь на метрике ROC-AUC.
9. Лучше всего с предсказанием увольнения справилась модель линейной регрессии со сбалансированными классами. Ее ROC-AUC на тестовой 0.925. Близкие к ней результаты показали также К ближайших соседей, деревья решений с большой глубиной и опорные вектора с ядром rbf. Способ кодирования переменных не оказал на результаты влияния, заметного визуально при изучении отчета. Хуже справлялись дерево решений с маленькой глубиной (для него слишком много входных признаков со сложными взаимоотношениями) и модель опорных векторов с сигмоидным ядром.

## Рекомендации
1. Похоже, что для повышения уровня удовлетворенности сотрудников бесполезно прибегать к повышению заработной платы (разве что в сегменте с самой низкой оплатой труда).

2. Могут быть полезны дальнейшие исследования:
* из чего складываются оценки начальников и как они влияют на отношение к сотруднику, поскольку именно оценки имеют наиболее сильную связь с уровнем удовлетворенности;
* почему наименее загруженные сотрудники уровня `junior` мало загружены (им ничего не поручают, потому что опасаются ошибок и вопросов; или они не хотят брать на себя дополнительные обязанности и ответственность; или есть другие причины).

3. Наибольшая текучка кадров заметна среди сотрудников уровня `junior`. Эта ситуация в целом не уникальна: неопытные специалисты во многих сферах более подвижны. Однако для сбережения ресурсов на поиск новых сотрудников можно предпринять следующее:
* более тщательно отбирать кандидатов, исходя из их заинтересованности в предлагаемых рабочих задачах;
* разработать или усовершенствовать систему адаптации в коллективе и обучения для сотрудников уровня `junior`.
